id: no-short-comments
language: rust
severity: info
message: "Short single-line comments may not be necessary. Code should be self-explanatory."
note: "Consider moving important context to function docstrings with examples, or removing if truly trivial."
files:
  - "crates/**/*.rs"
ignores:
  - "crates/term/tests/**/*.rs"
  - "crates/term/src/tests.rs"
  - "crates/**/benches/**/*.rs"
  - "vendor/**/*.rs"
rule:
  all:
    - kind: line_comment
      regex: ^//\s*.{0,25}\s*$
    - not:
        any:
          - regex: ^//[/!]
          - regex: ^//\s*(?i)(TODO|FIXME|BUG|SAFETY|NOTE|CHECK|XXX|HACK|DEBUG|INTERNAL|TEST|STUB|WAIT|FALLTHROUGH|REFACTOR|OPTIMIZE|DOCS|FIX|PERF|WARN|WARNING|INFO|LINT|ANCHOR)
          - regex: ^//\s*(\.\.\.|$)
          # Skip comments that are part of a multi-line comment block
          - precedes:
              kind: line_comment
          - follows:
              kind: line_comment
